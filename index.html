<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helldivers 2 Stratagem Icons</title>
<style>
	html {
		font-size: 100%;
		font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
	}

	img {
		max-block-size: 100%;
	}

	body {
		margin: 2rem;
	}

	table {
		border-collapse: collapse;
		border-spacing: 0;
	}

	th {
		text-align: start;
	}

	th,
	td {
		padding: 0.25rem;
	}
	.amount {
		font-variant-numeric: tabular-nums;
		text-align: end;
	}

	.not_applicable {
		opacity: 0.25;
		font-style: italic;
	}

	thead th {
		border-block-end: 2px solid hsla(0,0%,0%,0.2);
		vertical-align: bottom;
	}

	tbody tr:nth-child(odd) {
		background-color: hsla(0,0%,0%,0.05);
	}

	table img {
		background-color: black;
		vertical-align: middle;
	}
</style>
<main>
	<header>
		<h1>List of Stratagems</h1>
		<p>Sorted by ID</p>
	</header>
</main>
<script type="module">
	import { GROUPS } from './mjs/groups.mjs';
	import { STRATAGEMS } from './mjs/stratagems.mjs';
	import { CURRENCIES } from './mjs/currencies.mjs';
	import { TYPES } from './mjs/types.mjs';

	let sectionAllList = '';
	let listOfGroupDetails = '';

	STRATAGEMS
		.sort((itemA, itemB) => {
			return itemA.id > itemB.id ? 1 : -1;
		})
		.forEach(iconItem => {
			sectionAllList += `
				<tr>
					<td headers="all_header_icon row_all_${ iconItem.id }">
						<img width="64" height="64" src="./icons/${GROUPS[iconItem.group_id].foldername}/${iconItem.filename}.svg" alt="${iconItem.label}">
					</td>
					<th headers="all_header_id" id="row_all_${ iconItem.id }" scope="row">
						<code>${iconItem.id}</code><br>
						${iconItem.label}
					</th>
					<td headers="all_header_attributes row_all_${ iconItem.id }">
						${TYPES[iconItem.type].label}<br>
						${GROUPS[iconItem.group_id].label}
					</td>
					<td headers="all_header_uses row_all_${ iconItem.id }" class="amount">
						${ (iconItem.uses > -1) ? iconItem.uses : '<span class="not_applicable">âˆž</span>'}
					</td>
					<td headers="all_header_cooldown row_all_${ iconItem.id }" class="amount">
						${ (iconItem.cooldown > 0) ? iconItem.cooldown + '<abbr title="Seconds">s</abbr>' : '<span class="not_applicable">N/A</span>'}
					</td>
					<td headers="all_header_call_in_time row_all_${ iconItem.id }" class="amount">
						${ (iconItem.call_in_time) ? iconItem.call_in_time + '<abbr title="Seconds">s</abbr>' : '<span class="not_applicable">N/A</span>'}
					</td>
					<td headers="all_header_level_required row_all_${ iconItem.id }" class="amount">
						${ (iconItem.level_required) ? iconItem.level_required : '<span class="not_applicable">N/A</span>'}
					</td>
					<td headers="all_header_cost row_all_${ iconItem.id }" class="amount">
						${ (iconItem.currency_amount) ? iconItem.currency_amount.toLocaleString() + '<abbr title="Requisition slips">R</abbr>' : '<span class="not_applicable">Free</span>'}
					</td>
				</tr>
			`;
		});

	let allSection = `
		<table>
			<thead>
				<tr>
					<th scope="col" id="all_header_icon">Icon</th>
					<th scope="col" id="all_header_id">ID<br>Label</th>
					<th scope="col" id="all_header_attributes">Type<br>Group</th>
					<th scope="col" id="all_header_uses" class="amount">Uses</th>
					<th scope="col" id="all_header_cooldown" class="amount">Cooldown</th>
					<th scope="col" id="all_header_call_in_time" class="amount">Call-in<br>delay</th>
					<th scope="col" id="all_header_level_required" class="amount">Level<br>required</th>
					<th scope="col" id="all_header_cost" class="amount">Cost</th>
				</tr>
			</thead>
			<tbody>
				${ sectionAllList }
			</tbody>
		</table>
	`;
	document.querySelector('main').innerHTML += allSection;
</script>
